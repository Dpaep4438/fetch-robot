!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("fetchRobot",[],r):"object"==typeof exports?exports.fetchRobot=r():e.fetchRobot=r()}(this,function(){return function(e){function r(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var n={};return r.m=e,r.c=n,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:t})},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s="./src/index.js")}({"./node_modules/cross-domain-safe-weakmap/src/index.js":function(e,r,n){"use strict";var t=n("./node_modules/cross-domain-safe-weakmap/src/interface.js");n.d(r,"a",function(){return t.WeakMap})},"./node_modules/cross-domain-safe-weakmap/src/interface.js":function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=n("./node_modules/cross-domain-safe-weakmap/src/weakmap.js");n.d(r,"WeakMap",function(){return t.a})},"./node_modules/cross-domain-safe-weakmap/src/native.js":function(e,r,n){"use strict";function t(){if(!window.WeakMap)return!1;if(!window.Object.freeze)return!1;try{var e=new window.WeakMap,r={};return window.Object.freeze(r),e.set(r,"__testvalue__"),"__testvalue__"===e.get(r)}catch(e){return!1}}r.a=t},"./node_modules/cross-domain-safe-weakmap/src/weakmap.js":function(e,r,n){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}n.d(r,"a",function(){return u});var o=n("./node_modules/cross-domain-utils/src/index.js"),i=n("./node_modules/cross-domain-safe-weakmap/src/native.js"),s=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),a=Object.defineProperty,c=Date.now()%1e9,u=function(){function e(){if(t(this,e),c+=1,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__"+c,Object(i.a)())try{this.weakmap=new window.WeakMap}catch(e){}this.keys=[],this.values=[]}return s(e,[{key:"_cleanupClosedWindows",value:function(){for(var e=this.weakmap,r=this.keys,n=0;n<r.length;n++){var t=r[n];if(Object(o.j)(t)){if(e)try{e.delete(t)}catch(e){}r.splice(n,1),this.values.splice(n,1),n-=1}}}},{key:"isSafeToReadWrite",value:function(e){if(Object(o.i)(e))return!1;try{e&&e.self,e&&e[this.name]}catch(e){return!1}return!0}},{key:"set",value:function(e,r){if(!e)throw new Error("WeakMap expected key");var n=this.weakmap;if(n)try{n.set(e,r)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var t=this.name,o=e[t];o&&o[0]===e?o[1]=r:a(e,t,{value:[e,r],writable:!0})}else{this._cleanupClosedWindows();var i=this.keys,s=this.values,c=i.indexOf(e);-1===c?(i.push(e),s.push(r)):s[c]=r}}},{key:"get",value:function(e){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{if(r.has(e))return r.get(e)}catch(e){delete this.weakmap}if(!this.isSafeToReadWrite(e)){this._cleanupClosedWindows();var n=this.keys,t=n.indexOf(e);if(-1===t)return;return this.values[t]}var o=e[this.name];if(o&&o[0]===e)return o[1]}},{key:"delete",value:function(e){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{r.delete(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];n&&n[0]===e&&(n[0]=n[1]=void 0)}else{this._cleanupClosedWindows();var t=this.keys,o=t.indexOf(e);-1!==o&&(t.splice(o,1),this.values.splice(o,1))}}},{key:"has",value:function(e){if(!e)throw new Error("WeakMap expected key");var r=this.weakmap;if(r)try{return r.has(e)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(e)){var n=e[this.name];return!(!n||n[0]!==e)}return this._cleanupClosedWindows(),-1!==this.keys.indexOf(e)}}]),e}()},"./node_modules/cross-domain-utils/src/index.js":function(e,r,n){"use strict";function t(e){var r=e.location;if(!r)throw new Error("Can not read window location");var n=r.protocol;if(!n)throw new Error("Can not read window protocol");if(n===S.FILE_PROTOCOL)return"file://";var t=r.host;if(!t)throw new Error("Can not read window host");return n+"//"+t}function o(e){e=e||window;var r=t(e);return r&&e.mockDomain&&0===e.mockDomain.indexOf(S.MOCK_PROTOCOL)?e.mockDomain:r}function i(e){try{if(!e.location.href)return!0;if("about:blank"===e.location.href)return!0}catch(e){}return!1}function s(e){try{var r=Object.getOwnPropertyDescriptor(e,"location");if(r&&!1===r.enumerable)return!1}catch(e){}try{if(i(e))return!0;if(t(e)===t(window))return!0}catch(e){}return!1}function a(e){if(!s(e))return!1;try{if(i(e))return!0;if(o(window)===o(e))return!0}catch(e){}return!1}function c(e){if(e)try{if(e.parent&&e.parent!==e)return e.parent}catch(e){return}}function u(e){if(e&&!c(e))try{return e.opener}catch(e){return}}function d(e){var r=[];try{for(;e.parent!==e;)r.push(e.parent),e=e.parent}catch(e){}return r}function f(e,r){if(!e||!r)return!1;var n=c(r);return n?n===e:-1!==d(r).indexOf(e)}function l(e){var r=[],n=void 0;try{n=e.frames}catch(r){n=e}var t=void 0;try{t=n.length}catch(e){}if(0===t)return r;if(t){for(var o=0;o<t;o++){var i=void 0;try{i=n[o]}catch(e){continue}r.push(i)}return r}for(var s=0;s<100;s++){var a=void 0;try{a=n[s]}catch(e){return r}if(!a)return r;r.push(a)}return r}function m(e){for(var r=[],n=l(e),t=Array.isArray(n),o=0,n=t?n:n[Symbol.iterator]();;){var i;if(t){if(o>=n.length)break;i=n[o++]}else{if(o=n.next(),o.done)break;i=o.value}var s=i;r.push(s);for(var a=m(s),c=Array.isArray(a),u=0,a=c?a:a[Symbol.iterator]();;){var d;if(c){if(u>=a.length)break;d=a[u++]}else{if(u=a.next(),u.done)break;d=u.value}var f=d;r.push(f)}}return r}function p(e){if(e){try{if(e.top)return e.top}catch(e){}if(c(e)===e)return e;try{if(f(window,e)&&window.top)return window.top}catch(e){}try{if(f(e,window)&&window.top)return window.top}catch(e){}for(var r=m(e),n=Array.isArray(r),t=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(t>=r.length)break;o=r[t++]}else{if(t=r.next(),t.done)break;o=t.value}var i=o;try{if(i.top)return i.top}catch(e){}if(c(i)===i)return i}}}function b(e){if(!e.contentWindow)return!0;if(!e.parentNode)return!0;var r=e.ownerDocument;return!(!r||!r.body||r.body.contains(e))}function h(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{if(e===window)return!1}catch(e){return!0}try{if(!e)return!0}catch(e){return!0}try{if(e.closed)return!0}catch(e){return!e||"Call was rejected by callee.\r\n"!==e.message}if(r&&a(e))try{if(e.mockclosed)return!0}catch(e){}try{if(!e.parent||!e.top)return!0}catch(e){}try{var n=A.indexOf(e);if(-1!==n){var t=x[n];if(t&&b(t))return!0}}catch(e){}return!1}function w(e){e=e||window;var r=u(e);if(r)return r;var n=c(e);return n||void 0}function v(e,r){var n=w(r);if(n)return n===e;if(r===e)return!1;if(p(r)===r)return!1;for(var t=l(e),o=Array.isArray(t),i=0,t=o?t:t[Symbol.iterator]();;){var s;if(o){if(i>=t.length)break;s=t[i++]}else{if(i=t.next(),i.done)break;s=i.value}if(s===r)return!0}return!1}function _(){return Boolean(u(window))}function y(){return Boolean(c(window))}function j(e,r){if("string"==typeof e){if("string"==typeof r)return e===S.WILDCARD||r===e;if(Object(g.a)(r))return!1;if(Array.isArray(r))return!1}return Object(g.a)(e)?Object(g.a)(r)?e.toString()===r.toString():!Array.isArray(r)&&Boolean(r.match(e)):!!Array.isArray(e)&&(Array.isArray(r)?JSON.stringify(e)===JSON.stringify(r):!Object(g.a)(r)&&e.some(function(e){return j(e,r)}))}function O(e){var r=void 0;return e.match(/^(https?|mock|file):\/\//)?(r=e,r=r.split("/").slice(0,3).join("/")):o()}function E(e){try{if(e&&e.self===e)return!0}catch(e){}return!1}r.a=t,r.c=o,r.e=s,r.j=h,r.b=w,r.f=v,r.h=_,r.g=y,r.k=j,r.d=O,r.i=E;var g=n("./node_modules/cross-domain-utils/src/util.js"),S={MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",WILDCARD:"*"},A=[],x=[]},"./node_modules/cross-domain-utils/src/util.js":function(e,r,n){"use strict";function t(e){return"[object RegExp]"===Object.prototype.toString.call(e)}r.a=t},"./node_modules/post-robot/src/clean.js":function(e,r,n){"use strict";function t(e){var r=o.a.requestPromises.get(e);if(r)for(var n=r,t=Array.isArray(n),i=0,n=t?n:n[Symbol.iterator]();;){var s;if(t){if(i>=n.length)break;s=n[i++]}else{if(i=n.next(),i.done)break;s=i.value}var a=s;a.reject(new Error("No response from window - cleaned up"))}o.a.popupWindowsByWin&&o.a.popupWindowsByWin.delete(e),o.a.remoteWindows&&o.a.remoteWindows.delete(e),o.a.requestPromises.delete(e),o.a.methods.delete(e),o.a.readyPromises.delete(e)}r.a=t;var o=n("./node_modules/post-robot/src/global.js")},"./node_modules/post-robot/src/conf/config.js":function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,"a",function(){return s});var o,i=n("./node_modules/post-robot/src/conf/constants.js"),s={ALLOW_POSTMESSAGE_POPUP:!0,LOG_LEVEL:"info",BRIDGE_TIMEOUT:5e3,ACK_TIMEOUT:1e3,RES_TIMEOUT:1/0,LOG_TO_PAGE:!1,ALLOWED_POST_MESSAGE_METHODS:(o={},t(o,i.a.SEND_STRATEGIES.POST_MESSAGE,!0),t(o,i.a.SEND_STRATEGIES.BRIDGE,!0),t(o,i.a.SEND_STRATEGIES.GLOBAL,!0),o)};0===window.location.href.indexOf(i.a.FILE_PROTOCOL)&&(s.ALLOW_POSTMESSAGE_POPUP=!0)},"./node_modules/post-robot/src/conf/constants.js":function(e,r,n){"use strict";n.d(r,"a",function(){return t}),n.d(r,"b",function(){return o});var t={POST_MESSAGE_TYPE:{REQUEST:"postrobot_message_request",RESPONSE:"postrobot_message_response",ACK:"postrobot_message_ack"},POST_MESSAGE_ACK:{SUCCESS:"success",ERROR:"error"},POST_MESSAGE_NAMES:{METHOD:"postrobot_method",READY:"postrobot_ready",OPEN_TUNNEL:"postrobot_open_tunnel"},WINDOW_TYPES:{FULLPAGE:"fullpage",POPUP:"popup",IFRAME:"iframe"},WINDOW_PROPS:{POSTROBOT:"__postRobot__"},SERIALIZATION_TYPES:{METHOD:"postrobot_method",ERROR:"postrobot_error",PROMISE:"postrobot_promise",ZALGO_PROMISE:"postrobot_zalgo_promise"},SEND_STRATEGIES:{POST_MESSAGE:"postrobot_post_message",BRIDGE:"postrobot_bridge",GLOBAL:"postrobot_global"},MOCK_PROTOCOL:"mock:",FILE_PROTOCOL:"file:",BRIDGE_NAME_PREFIX:"__postrobot_bridge__",POSTROBOT_PROXY:"__postrobot_proxy__",WILDCARD:"*"},o=Object.keys(t.POST_MESSAGE_NAMES).map(function(e){return t.POST_MESSAGE_NAMES[e]})},"./node_modules/post-robot/src/conf/index.js":function(e,r,n){"use strict";var t=n("./node_modules/post-robot/src/conf/config.js");n.d(r,"a",function(){return t.a});var o=n("./node_modules/post-robot/src/conf/constants.js");n.d(r,"b",function(){return o.a}),n.d(r,"c",function(){return o.b})},"./node_modules/post-robot/src/drivers/index.js":function(e,r,n){"use strict";var t=n("./node_modules/post-robot/src/drivers/receive/index.js");n.d(r,"d",function(){return t.a}),n.d(r,"e",function(){return t.b});var o=n("./node_modules/post-robot/src/drivers/send/index.js");n.d(r,"f",function(){return o.a});var i=n("./node_modules/post-robot/src/drivers/listeners.js");n.d(r,"a",function(){return i.a}),n.d(r,"b",function(){return i.b}),n.d(r,"c",function(){return i.c})},"./node_modules/post-robot/src/drivers/listeners.js":function(e,r,n){"use strict";function t(e,r){d.a.responseListeners[e]=r}function o(e){return d.a.responseListeners[e]}function i(e){delete d.a.responseListeners[e]}function s(e){var r=e.name,n=e.win,t=e.domain;if(n===l.b.WILDCARD&&(n=null),t===l.b.WILDCARD&&(t=null),!r)throw new Error("Name required to get request listener");var o=d.a.requestListeners[r];if(o)for(var i=[n,d.a.WINDOW_WILDCARD],s=0;s<i.length;s++){var a=i[s],c=a&&o.get(a);if(c){for(var f=[t,l.b.WILDCARD],p=0;p<f.length;p++){var b=f[p];if(b&&(b=b.toString(),c[b]))return c[b]}if(c[m])for(var h=c[m],w=Array.isArray(h),v=0,h=w?h:h[Symbol.iterator]();;){var _;if(w){if(v>=h.length)break;_=h[v++]}else{if(v=h.next(),v.done)break;_=v.value}var y=_,j=y.regex,O=y.listener;if(Object(u.k)(j,t))return O}}}}function a(e,r){var n=e.name,t=e.win,o=e.domain;if(!n||"string"!=typeof n)throw new Error("Name required to add request listener");if(Array.isArray(t)){for(var i=[],u=t,p=Array.isArray(u),b=0,u=p?u:u[Symbol.iterator]();;){var h;if(p){if(b>=u.length)break;h=u[b++]}else{if(b=u.next(),b.done)break;h=b.value}var w=h;i.push(a({name:n,domain:o,win:w},r))}return{cancel:function(){for(var e=i,r=Array.isArray(e),n=0,e=r?e:e[Symbol.iterator]();;){var t;if(r){if(n>=e.length)break;t=e[n++]}else{if(n=e.next(),n.done)break;t=n.value}t.cancel()}}}}if(Array.isArray(o)){for(var v=[],_=o,y=Array.isArray(_),j=0,_=y?_:_[Symbol.iterator]();;){var O;if(y){if(j>=_.length)break;O=_[j++]}else{if(j=_.next(),j.done)break;O=j.value}var E=O;v.push(a({name:n,win:t,domain:E},r))}return{cancel:function(){for(var e=v,r=Array.isArray(e),n=0,e=r?e:e[Symbol.iterator]();;){var t;if(r){if(n>=e.length)break;t=e[n++]}else{if(n=e.next(),n.done)break;t=n.value}t.cancel()}}}}var g=s({name:n,win:t,domain:o});if(t&&t!==l.b.WILDCARD||(t=d.a.WINDOW_WILDCARD),o=o||l.b.WILDCARD,g)throw t&&o?new Error("Request listener already exists for "+n+" on domain "+o.toString()+" for specified window"):t?new Error("Request listener already exists for "+n+" for specified window"):o?new Error("Request listener already exists for "+n+" on domain "+o.toString()):new Error("Request listener already exists for "+n);var S=d.a.requestListeners,A=S[n];A||(A=new c.a,S[n]=A);var x=A.get(t);x||(x={},A.set(t,x));var P=o.toString();x[P]=r;var T=x[m],k=void 0;return Object(f.e)(o)&&(T||(T=[],x[m]=T),k={regex:o,listener:r},T.push(k)),{cancel:function(){x&&(delete x[P],t&&0===Object.keys(x).length&&A.delete(t),k&&T.splice(T.indexOf(k,1)))}}}r.b=t,r.e=o,r.c=i,r.d=s,r.a=a;var c=(n("./node_modules/zalgo-promise/src/index.js"),n("./node_modules/cross-domain-safe-weakmap/src/index.js")),u=n("./node_modules/cross-domain-utils/src/index.js"),d=n("./node_modules/post-robot/src/global.js"),f=n("./node_modules/post-robot/src/lib/index.js"),l=n("./node_modules/post-robot/src/conf/index.js");d.a.responseListeners=d.a.responseListeners||{},d.a.requestListeners=d.a.requestListeners||{},d.a.WINDOW_WILDCARD=d.a.WINDOW_WILDCARD||new function(){};var m="__domain_regex__"},"./node_modules/post-robot/src/drivers/receive/index.js":function(e,r,n){"use strict";function t(e){var r=void 0;try{r=Object(u.f)(e)}catch(e){return}if(r&&"object"===(void 0===r?"undefined":l(r))&&null!==r&&(r=r[c.b.WINDOW_PROPS.POSTROBOT])&&"object"===(void 0===r?"undefined":l(r))&&null!==r&&r.type&&"string"==typeof r.type&&f.a[r.type])return r}function o(e){if(!window||window.closed)throw new Error("Message recieved in closed window");try{if(!e.source)return}catch(e){return}var r=e.source,n=e.origin,o=e.data,i=t(o);if(i){if(!i.sourceDomain||"string"!=typeof i.sourceDomain)throw new Error("Expected message to have sourceDomain");if(0!==i.sourceDomain.indexOf(c.b.MOCK_PROTOCOL)&&0!==i.sourceDomain.indexOf(c.b.FILE_PROTOCOL)||(n=i.sourceDomain),-1===d.a.receivedMessages.indexOf(i.id)){d.a.receivedMessages.push(i.id);var s=void 0;if(s=-1!==c.c.indexOf(i.name)||i.type===c.b.POST_MESSAGE_TYPE.ACK?"debug":"error"===i.ack?"error":"info",u.i.logLevel(s,["\n\n\t","#receive",i.type.replace(/^postrobot_message_/,""),"::",i.name,"::",n,"\n\n",i]),Object(a.j)(r))return void u.i.debug("Source window is closed - can not send "+i.type+" "+i.name);i.data&&(i.data=Object(u.b)(r,n,i.data)),f.a[i.type](r,n,i)}}}function i(e){try{e.source}catch(e){return}var r={source:e.source||e.sourceElement,origin:e.origin||e.originalEvent&&e.originalEvent.origin,data:e.data};o(r)}function s(){Object(u.a)(window,"message",i)}r.b=i,r.a=s;var a=n("./node_modules/cross-domain-utils/src/index.js"),c=n("./node_modules/post-robot/src/conf/index.js"),u=n("./node_modules/post-robot/src/lib/index.js"),d=n("./node_modules/post-robot/src/global.js"),f=n("./node_modules/post-robot/src/drivers/receive/types.js"),l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};d.a.receivedMessages=d.a.receivedMessages||[]},"./node_modules/post-robot/src/drivers/receive/types.js":function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,"a",function(){return l});var o,i=n("./node_modules/zalgo-promise/src/index.js"),s=n("./node_modules/cross-domain-utils/src/index.js"),a=n("./node_modules/post-robot/src/conf/index.js"),c=n("./node_modules/post-robot/src/lib/index.js"),u=n("./node_modules/post-robot/src/drivers/send/index.js"),d=n("./node_modules/post-robot/src/drivers/listeners.js"),f=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},l=(o={},t(o,a.b.POST_MESSAGE_TYPE.ACK,function(e,r,n){var t=Object(d.e)(n.hash);if(!t)throw new Error("No handler found for post message ack for message: "+n.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(s.k)(t.domain,r))throw new Error("Ack origin "+r+" does not match domain "+t.domain.toString());t.ack=!0}),t(o,a.b.POST_MESSAGE_TYPE.REQUEST,function(e,r,n){function t(t){return n.fireAndForget||Object(s.j)(e)?i.a.resolve():Object(u.a)(e,f({target:n.originalSource,hash:n.hash,name:n.name},t),r)}var o=Object(d.d)({name:n.name,win:e,domain:r});return i.a.all([t({type:a.b.POST_MESSAGE_TYPE.ACK}),i.a.try(function(){if(!o)throw new Error("No handler found for post message: "+n.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(s.k)(o.domain,r))throw new Error("Request origin "+r+" does not match domain "+o.domain.toString());var t=n.data;return o.handler({source:e,origin:r,data:t})}).then(function(e){return t({type:a.b.POST_MESSAGE_TYPE.RESPONSE,ack:a.b.POST_MESSAGE_ACK.SUCCESS,data:e})},function(e){var r=Object(c.o)(e).replace(/^Error: /,"");return t({type:a.b.POST_MESSAGE_TYPE.RESPONSE,ack:a.b.POST_MESSAGE_ACK.ERROR,error:r})})]).then(c.j).catch(function(e){if(o&&o.handleError)return o.handleError(e);c.i.error(Object(c.o)(e))})}),t(o,a.b.POST_MESSAGE_TYPE.RESPONSE,function(e,r,n){var t=Object(d.e)(n.hash);if(!t)throw new Error("No handler found for post message response for message: "+n.name+" from "+r+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!Object(s.k)(t.domain,r))throw new Error("Response origin "+r+" does not match domain "+t.domain);if(Object(d.c)(n.hash),n.ack===a.b.POST_MESSAGE_ACK.ERROR)return t.respond(new Error(n.error),null);if(n.ack===a.b.POST_MESSAGE_ACK.SUCCESS){var o=n.data||n.response;return t.respond(null,{source:e,origin:r,data:o})}}),o)},"./node_modules/post-robot/src/drivers/send/index.js":function(e,r,n){"use strict";function t(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function o(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t=Object(u.p)(),o=Object(u.c)(),i=Object(s.c)(window);return f({},r,n,{sourceDomain:i,id:r.id||t,windowType:o})}function i(e,r,n){return a.a.try(function(){r=o(e,r,{data:Object(u.n)(e,n,r.data),domain:n});var i=void 0;if(i=-1!==c.c.indexOf(r.name)||r.type===c.b.POST_MESSAGE_TYPE.ACK?"debug":"error"===r.ack?"error":"info",u.i.logLevel(i,["\n\n\t","#send",r.type.replace(/^postrobot_message_/,""),"::",r.name,"::",n||c.b.WILDCARD,"\n\n",r]),e===window)throw new Error("Attemping to send message to self");if(Object(s.j)(e))throw new Error("Window is closed");u.i.debug("Running send message strategies",r);var f=[],l=Object(u.g)(t({},c.b.WINDOW_PROPS.POSTROBOT,r),null,2);return a.a.map(Object.keys(d.a),function(r){return a.a.try(function(){if(!c.a.ALLOWED_POST_MESSAGE_METHODS[r])throw new Error("Strategy disallowed: "+r);return d.a[r](e,l,n)}).then(function(){return f.push(r+": success"),!0},function(e){return f.push(r+": "+Object(u.o)(e)+"\n"),!1})}).then(function(e){var n=e.some(Boolean),t=r.type+" "+r.name+" "+(n?"success":"error")+":\n  - "+f.join("\n  - ")+"\n";if(u.i.debug(t),!n)throw new Error(t)})})}r.a=i;var s=n("./node_modules/cross-domain-utils/src/index.js"),a=n("./node_modules/zalgo-promise/src/index.js"),c=n("./node_modules/post-robot/src/conf/index.js"),u=n("./node_modules/post-robot/src/lib/index.js"),d=n("./node_modules/post-robot/src/drivers/send/strategies.js"),f=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}},"./node_modules/post-robot/src/drivers/send/strategies.js":function(e,r,n){"use strict";n.d(r,"a",function(){return i});var t=n("./node_modules/cross-domain-utils/src/index.js"),o=n("./node_modules/post-robot/src/conf/index.js"),i={};i[o.b.SEND_STRATEGIES.POST_MESSAGE]=function(e,r,n){var i=void 0;i=Array.isArray(n)?n:n?[n]:[o.b.WILDCARD],i=i.map(function(r){if(0===r.indexOf(o.b.MOCK_PROTOCOL)){if(window.location.protocol===o.b.FILE_PROTOCOL)return o.b.WILDCARD;if(!Object(t.e)(e))throw new Error("Attempting to send messsage to mock domain "+r+", but window is actually cross-domain");return Object(t.a)(e)}return 0===r.indexOf(o.b.FILE_PROTOCOL)?o.b.WILDCARD:r}),i.forEach(function(n){return e.postMessage(r,n)})}},"./node_modules/post-robot/src/global.js":function(e,r,n){"use strict";n.d(r,"a",function(){return o});var t=n("./node_modules/post-robot/src/conf/index.js"),o=window[t.b.WINDOW_PROPS.POSTROBOT]=window[t.b.WINDOW_PROPS.POSTROBOT]||{};o.registerSelf=function(){}},"./node_modules/post-robot/src/index.js":function(e,r,n){"use strict";var t=n("./node_modules/post-robot/src/interface.js");n.d(r,"a",function(){return t.on}),n.d(r,"b",function(){return t.send})},"./node_modules/post-robot/src/interface.js":function(e,r,n){"use strict";function t(){s.a.initialized||(Object(i.d)(),Object(o.d)(),Object(o.h)()),s.a.initialized=!0}Object.defineProperty(r,"__esModule",{value:!0}),r.init=t;var o=n("./node_modules/post-robot/src/lib/index.js"),i=n("./node_modules/post-robot/src/drivers/index.js"),s=n("./node_modules/post-robot/src/global.js"),a=n("./node_modules/post-robot/src/clean.js");n.d(r,"cleanUpWindow",function(){return a.a});var c=n("./node_modules/post-robot/src/public/index.js");n.d(r,"parent",function(){return c.j}),n.d(r,"bridge",function(){return c.c}),n.d(r,"send",function(){return c.l}),n.d(r,"request",function(){return c.k}),n.d(r,"sendToParent",function(){return c.m}),n.d(r,"client",function(){return c.d}),n.d(r,"on",function(){return c.h}),n.d(r,"listen",function(){return c.f}),n.d(r,"once",function(){return c.i}),n.d(r,"listener",function(){return c.g}),n.d(r,"CONFIG",function(){return c.a}),n.d(r,"CONSTANTS",function(){return c.b}),n.d(r,"disable",function(){return c.e});var u=n("./node_modules/zalgo-promise/src/index.js");n.d(r,"Promise",function(){return u.a}),t()},"./node_modules/post-robot/src/lib/index.js":function(e,r,n){"use strict";var t=n("./node_modules/post-robot/src/lib/util.js");n.d(r,"a",function(){return t.a}),n.d(r,"c",function(){return t.b}),n.d(r,"e",function(){return t.c}),n.d(r,"f",function(){return t.d}),n.d(r,"g",function(){return t.e}),n.d(r,"j",function(){return t.f}),n.d(r,"l",function(){return t.g}),n.d(r,"m",function(){return t.i}),n.d(r,"o",function(){return t.j}),n.d(r,"p",function(){return t.k});var o=n("./node_modules/post-robot/src/lib/log.js");n.d(r,"i",function(){return o.a});var i=n("./node_modules/post-robot/src/lib/serialize.js");n.d(r,"b",function(){return i.a}),n.d(r,"h",function(){return i.b}),n.d(r,"n",function(){return i.c});var s=n("./node_modules/post-robot/src/lib/ready.js");n.d(r,"d",function(){return s.a}),n.d(r,"k",function(){return s.b})},"./node_modules/post-robot/src/lib/log.js":function(e,r,n){"use strict";n.d(r,"a",function(){return a});var t=n("./node_modules/post-robot/src/lib/util.js"),o=n("./node_modules/post-robot/src/conf/index.js"),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=["debug","info","warn","error"];Function.prototype.bind&&window.console&&"object"===i(console.log)&&["log","info","warn","error"].forEach(function(e){console[e]=this.bind(console[e],console)},Function.prototype.call);var a={clearLogs:function(){if(window.console&&window.console.clear&&window.console.clear(),o.a.LOG_TO_PAGE){var e=document.getElementById("postRobotLogs");e&&e.parentNode&&e.parentNode.removeChild(e)}},writeToPage:function(e,r){setTimeout(function(){var n=document.getElementById("postRobotLogs");n||(n=document.createElement("div"),n.id="postRobotLogs",n.style.cssText="width: 800px; font-family: monospace; white-space: pre-wrap;",document.body&&document.body.appendChild(n));var o=document.createElement("div"),i=(new Date).toString().split(" ")[4],s=Array.prototype.slice.call(r).map(function(e){if("string"==typeof e)return e;if(!e)return Object.prototype.toString.call(e);var r=void 0;try{r=Object(t.e)(e,null,2)}catch(e){r="[object]"}return"\n\n"+r+"\n\n"}).join(" "),a=i+" "+e+" "+s;o.innerHTML=a;var c={log:"#ddd",warn:"orange",error:"red",info:"blue",debug:"#aaa"}[e];o.style.cssText="margin-top: 10px; color: "+c+";",n.childNodes.length?n.insertBefore(o,n.childNodes[0]):n.appendChild(o)})},logLevel:function(e,r){setTimeout(function(){try{var n=window.LOG_LEVEL||o.a.LOG_LEVEL;if(s.indexOf(e)<s.indexOf(n))return;if(r=Array.prototype.slice.call(r),r.unshift(""+window.location.host+window.location.pathname),r.unshift("::"),r.unshift(""+Object(t.b)().toLowerCase()),r.unshift("[post-robot]"),o.a.LOG_TO_PAGE&&a.writeToPage(e,r),!window.console)return;if(window.console[e]||(e="log"),!window.console[e])return;window.console[e].apply(window.console,r)}catch(e){}},1)},debug:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];a.logLevel("debug",r)},info:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];a.logLevel("info",r)},warn:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];a.logLevel("warn",r)},error:function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];a.logLevel("error",r)}}},"./node_modules/post-robot/src/lib/ready.js":function(e,r,n){"use strict";function t(){Object(u.on)(c.b.POST_MESSAGE_NAMES.READY,{window:c.b.WILDCARD,domain:c.b.WILDCARD},function(e){var r=e.source,n=f.a.readyPromises.get(r);n?n.resolve(e):(n=(new a.a).resolve(e),f.a.readyPromises.set(r,n))});var e=Object(s.b)();e&&Object(u.send)(e,c.b.POST_MESSAGE_NAMES.READY,{},{domain:c.b.WILDCARD,timeout:1/0}).catch(function(e){d.a.debug(Object(l.j)(e))})}function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Window",t=f.a.readyPromises.get(e);return t||(t=new a.a,f.a.readyPromises.set(e,t),setTimeout(function(){return t.reject(new Error(n+" did not load after "+r+"ms"))},r),t)}r.a=t,r.b=o;var i=n("./node_modules/cross-domain-safe-weakmap/src/index.js"),s=n("./node_modules/cross-domain-utils/src/index.js"),a=n("./node_modules/zalgo-promise/src/index.js"),c=n("./node_modules/post-robot/src/conf/index.js"),u=n("./node_modules/post-robot/src/interface.js"),d=n("./node_modules/post-robot/src/lib/log.js"),f=n("./node_modules/post-robot/src/global.js"),l=n("./node_modules/post-robot/src/lib/util.js");f.a.readyPromises=f.a.readyPromises||new i.a},"./node_modules/post-robot/src/lib/serialize.js":function(e,r,n){"use strict";function t(e,r){return"object"===(void 0===e?"undefined":O(e))&&null!==e&&e.__type__===r}function o(e,r,n,t){var o=Object(v.k)(),i=j.a.methods.get(e);return i||(i={},j.a.methods.set(e,i)),i[o]={domain:r,method:n},{__type__:w.b.SERIALIZATION_TYPES.METHOD,__id__:o,__name__:t}}function i(e){return{__type__:w.b.SERIALIZATION_TYPES.ERROR,__message__:Object(v.j)(e)}}function s(e,r,n,t){return{__type__:w.b.SERIALIZATION_TYPES.PROMISE,__then__:o(e,r,function(e,r){return n.then(e,r)},t+".then")}}function a(e,r,n,t){return{__type__:w.b.SERIALIZATION_TYPES.ZALGO_PROMISE,__then__:o(e,r,function(e,r){return n.then(e,r)},t+".then")}}function c(e,r,n){return Object(v.h)({obj:n},function(n,t){return"function"==typeof n?o(e,r,n,t.toString()):n instanceof Error?i(n):window.Promise&&n instanceof window.Promise?s(e,r,n,t.toString()):h.a.isPromise(n)?a(e,r,n,t.toString()):void 0}).obj}function u(e,r,n){function t(){var t=Array.prototype.slice.call(arguments);return y.a.debug("Call foreign method",n.__name__,t),Object(_.send)(e,w.b.POST_MESSAGE_NAMES.METHOD,{id:n.__id__,name:n.__name__,args:t},{domain:r,timeout:1/0}).then(function(e){var r=e.data;return y.a.debug("Got foreign method result",n.__name__,r.result),r.result},function(e){throw y.a.debug("Got foreign method error",Object(v.j)(e)),e})}return t.__name__=n.__name__,t.__xdomain__=!0,t.source=e,t.origin=r,t}function d(e,r,n){return new Error(n.__message__)}function f(e,r,n){return new h.a(function(t,o){return u(e,r,n.__then__)(t,o)})}function l(e,r,n){return window.Promise?new window.Promise(function(t,o){return u(e,r,n.__then__)(t,o)}):f(e,r,n)}function m(e,r,n){return Object(v.h)({obj:n},function(n,o){if("object"===(void 0===n?"undefined":O(n))&&null!==n)return t(n,w.b.SERIALIZATION_TYPES.METHOD)?u(e,r,n):t(n,w.b.SERIALIZATION_TYPES.ERROR)?d(e,r,n):t(n,w.b.SERIALIZATION_TYPES.PROMISE)?l(e,r,n):t(n,w.b.SERIALIZATION_TYPES.ZALGO_PROMISE)?f(e,r,n):void 0}).obj}n.d(r,"b",function(){return E}),r.c=c,r.a=m;var p=n("./node_modules/cross-domain-safe-weakmap/src/index.js"),b=n("./node_modules/cross-domain-utils/src/index.js"),h=n("./node_modules/zalgo-promise/src/index.js"),w=n("./node_modules/post-robot/src/conf/index.js"),v=n("./node_modules/post-robot/src/lib/util.js"),_=n("./node_modules/post-robot/src/interface.js"),y=n("./node_modules/post-robot/src/lib/log.js"),j=n("./node_modules/post-robot/src/global.js"),O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};j.a.methods=j.a.methods||new p.a;var E=Object(v.g)(function(){Object(_.on)(w.b.POST_MESSAGE_NAMES.METHOD,{window:w.b.WILDCARD,origin:w.b.WILDCARD},function(e){var r=e.source,n=e.origin,t=e.data,o=j.a.methods.get(r);if(!o)throw new Error("Could not find any methods this window has privileges to call");var i=o[t.id];if(!i)throw new Error("Could not find method with id: "+t.id);if(!Object(b.k)(i.domain,n))throw new Error("Method domain "+i.domain+" does not match origin "+n);return y.a.debug("Call local method",t.name,t.args),h.a.try(function(){return i.method.apply({source:r,origin:n,data:t},t.args)}).then(function(e){return{result:e,id:t.id,name:t.name}})})})},"./node_modules/post-robot/src/lib/util.js":function(e,r,n){"use strict";function t(e){if(!e)return"<unknown error: "+Object.prototype.toString.call(e)+">";if("string"==typeof e)return e;if(e instanceof Error){var r=e&&e.stack,n=e&&e.message;if(r&&n)return-1!==r.indexOf(n)?r:n+"\n"+r;if(r)return r;if(n)return n}return"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e)}function o(){}function i(e,r,n){return e.addEventListener?e.addEventListener(r,n):e.attachEvent("on"+r,n),{cancel:function(){e.removeEventListener?e.removeEventListener(r,n):e.detachEvent("on"+r,n)}}}function s(){var e="0123456789abcdef";return"xxxxxxxxxx".replace(/./g,function(){return e.charAt(Math.floor(Math.random()*e.length))})}function a(e,r){for(var n=0;n<e.length;n++)r(e[n],n)}function c(e,r){for(var n in e)e.hasOwnProperty(n)&&r(e[n],n)}function u(e,r){Array.isArray(e)?a(e,r):"object"===(void 0===e?"undefined":v(e))&&null!==e&&c(e,r)}function d(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(n>=100)throw new Error("Self-referential object passed, or object contained too many layers");var t=void 0;if("object"!==(void 0===e?"undefined":v(e))||null===e||Array.isArray(e)){if(!Array.isArray(e))throw new Error("Invalid type: "+(void 0===e?"undefined":v(e)));t=[]}else t={};return u(e,function(e,o){var i=r(e,o);void 0!==i?t[o]=i:"object"===(void 0===e?"undefined":v(e))&&null!==e?t[o]=d(e,r,n+1):t[o]=e}),t}function f(e,r){function n(){t=setTimeout(n,r),e.call()}var t=void 0;return t=setTimeout(n,r),{cancel:function(){clearTimeout(t)}}}function l(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function m(){return Object(h.h)()?w.b.WINDOW_TYPES.POPUP:Object(h.g)()?w.b.WINDOW_TYPES.IFRAME:w.b.WINDOW_TYPES.FULLPAGE}function p(e,r,n){var t=void 0,o=void 0;try{if("{}"!==JSON.stringify({})&&(t=Object.prototype.toJSON,delete Object.prototype.toJSON),"{}"!==JSON.stringify({}))throw new Error("Can not correctly serialize JSON objects");if("[]"!==JSON.stringify([])&&(o=Array.prototype.toJSON,delete Array.prototype.toJSON),"[]"!==JSON.stringify([]))throw new Error("Can not correctly serialize JSON objects")}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}var i=JSON.stringify.call(this,e,r,n);try{t&&(Object.prototype.toJSON=t),o&&(Array.prototype.toJSON=o)}catch(e){throw new Error("Can not repair JSON.stringify: "+e.message)}return i}function b(e){return JSON.parse(e)}r.j=t,n.d(r,"g",function(){return _}),r.f=o,r.a=i,r.k=s,r.h=d,r.i=f,r.c=l,r.b=m,r.e=p,r.d=b;var h=(n("./node_modules/cross-domain-safe-weakmap/src/index.js"),n("./node_modules/cross-domain-utils/src/index.js")),w=n("./node_modules/post-robot/src/conf/index.js"),v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_=function(e){if(!e)return e;var r=!1;return function(){if(!r)return r=!0,e.apply(this,arguments)}}},"./node_modules/post-robot/src/public/client.js":function(e,r,n){"use strict";function t(e){return c.a.try(function(){if(!e.name)throw new Error("Expected options.name");var r=e.name,n=e.window,t=void 0;if("string"==typeof n){var o=document.getElementById(n);if(!o)throw new Error("Expected options.window "+Object.prototype.toString.call(n)+" to be a valid element id");if("iframe"!==o.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(n)+" to be an iframe");if(!o.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n=o.contentWindow}else if(n instanceof HTMLElement){if("iframe"!==n.tagName.toLowerCase())throw new Error("Expected options.window "+Object.prototype.toString.call(n)+" to be an iframe");if(n&&!n.contentWindow)throw new Error("Iframe must have contentWindow.  Make sure it has a src attribute and is in the DOM.");n&&n.contentWindow&&(n=n.contentWindow)}if(!n)throw new Error("Expected options.window to be a window object, iframe, or iframe element id.");t=e.domain||d.b.WILDCARD;var i=e.name+"_"+Object(l.p)();if(Object(u.j)(n))throw new Error("Target window is closed");var s=!1,a=m.a.requestPromises.get(n);a||(a=[],m.a.requestPromises.set(n,a));var p=c.a.try(function(){if(Object(u.f)(window,n))return c.a.resolve(Object(l.k)(n))}).then(function(){return new c.a(function(o,c){var l={name:r,window:n,domain:t,respond:function(e,r){e||(s=!0,a.splice(a.indexOf(p,1))),e?c(e):o(r)}};if(Object(f.b)(i,l),Object(f.f)(n,{type:d.b.POST_MESSAGE_TYPE.REQUEST,hash:i,name:r,data:e.data,fireAndForget:e.fireAndForget},t).catch(c),e.fireAndForget)return o();var m=d.a.ACK_TIMEOUT,b=e.timeout||d.a.RES_TIMEOUT,h=100,w=function t(){if(!s){if(Object(u.j)(n))return c(l.ack?new Error("Window closed for "+r+" before response"):new Error("Window closed for "+r+" before ack"));m-=h,b-=h;if(l.ack){if(b===1/0)return;h=Math.min(b,2e3)}else{if(m<=0)return c(new Error("No ack for postMessage "+r+" in "+d.a.ACK_TIMEOUT+"ms"));if(b<=0)return c(new Error("No response for postMessage "+r+" in "+(e.timeout||d.a.RES_TIMEOUT)+"ms"))}setTimeout(t,h)}};setTimeout(w,h)})});return p.catch(function(){Object(f.c)(i)}),a.push(p),p})}function o(e,r,n,o){return o=o||{},o.window=e,o.name=r,o.data=n,t(o)}function i(e,r,n){var t=Object(u.b)();return t?o(t,e,r,n):new c.a(function(e,r){return r(new Error("Window does not have a parent"))})}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e.window)throw new Error("Expected options.window");return{send:function(r,n){return o(e.window,r,n,e)}}}n.d(r,"c",function(){return o}),r.b=t,r.d=i,r.a=s;var a=n("./node_modules/cross-domain-safe-weakmap/src/index.js"),c=n("./node_modules/zalgo-promise/src/index.js"),u=n("./node_modules/cross-domain-utils/src/index.js"),d=n("./node_modules/post-robot/src/conf/index.js"),f=n("./node_modules/post-robot/src/drivers/index.js"),l=n("./node_modules/post-robot/src/lib/index.js"),m=n("./node_modules/post-robot/src/global.js");m.a.requestPromises=m.a.requestPromises||new a.a},"./node_modules/post-robot/src/public/config.js":function(e,r,n){"use strict";function t(){delete window[o.b.WINDOW_PROPS.POSTROBOT],window.removeEventListener("message",i.e)}r.c=t;var o=n("./node_modules/post-robot/src/conf/index.js"),i=n("./node_modules/post-robot/src/drivers/index.js");n.d(r,"a",function(){return o.a}),n.d(r,"b",function(){return o.b})},"./node_modules/post-robot/src/public/index.js":function(e,r,n){"use strict";n.d(r,"j",function(){return a}),n.d(r,"c",function(){return c});var t=n("./node_modules/cross-domain-utils/src/index.js"),o=n("./node_modules/post-robot/src/public/client.js");n.d(r,"d",function(){return o.a}),n.d(r,"k",function(){return o.b}),n.d(r,"l",function(){return o.c}),n.d(r,"m",function(){return o.d});var i=n("./node_modules/post-robot/src/public/server.js");n.d(r,"f",function(){return i.a}),n.d(r,"g",function(){return i.b}),n.d(r,"h",function(){return i.c}),n.d(r,"i",function(){return i.d});var s=n("./node_modules/post-robot/src/public/config.js");n.d(r,"a",function(){return s.a}),n.d(r,"b",function(){return s.b}),n.d(r,"e",function(){return s.c});var a=Object(t.b)(),c=void 0},"./node_modules/post-robot/src/public/server.js":function(e,r,n){"use strict";function t(e){if(!e.name)throw new Error("Expected options.name");if(!e.handler)throw new Error("Expected options.handler");var r={handler:e.handler,handleError:e.errorHandler||function(e){throw e},window:e.window,domain:e.domain||f.b.WILDCARD,name:e.name},n=Object(d.a)({name:r.name,win:r.window,domain:r.domain},r);if(e.once){var t=r.handler;r.handler=Object(u.l)(function(){return n.cancel(),t.apply(this,arguments)})}if(r.window&&e.errorOnClose)var o=Object(u.m)(function(){Object(a.j)(r.window)&&(o.cancel(),r.handleError(new Error("Post message target window is closed")))},50);return{cancel:function(){n.cancel()}}}function o(e,r,n){return"function"==typeof r&&(n=r,r={}),r=r||{},r.name=e,r.handler=n||r.handler,t(r)}function i(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2];"function"==typeof r&&(n=r,r={}),r=r||{},n=n||r.handler;var o=r.errorHandler,i=new c.a(function(t,i){r=r||{},r.name=e,r.once=!0,r.handler=function(e){if(t(e),n)return n(e)},r.errorHandler=function(e){if(i(e),o)return o(e)}}),s=t(r);return i.cancel=s.cancel,i}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{on:function(r,n){return o(r,e,n)}}}n.d(r,"c",function(){return o}),r.a=t,r.d=i,r.b=s;var a=n("./node_modules/cross-domain-utils/src/index.js"),c=n("./node_modules/zalgo-promise/src/index.js"),u=n("./node_modules/post-robot/src/lib/index.js"),d=n("./node_modules/post-robot/src/drivers/index.js"),f=n("./node_modules/post-robot/src/conf/index.js")},"./node_modules/zalgo-promise/src/exceptions.js":function(e,r,n){"use strict";function t(e){if(-1===s.indexOf(e)){s.push(e),setTimeout(function(){throw e},1);for(var r=0;r<i.length;r++)i[r](e)}}function o(e){return i.push(e),{cancel:function(){i.splice(i.indexOf(e),1)}}}r.a=t,r.b=o;var i=[],s=[]},"./node_modules/zalgo-promise/src/index.js":function(e,r,n){"use strict";var t=n("./node_modules/zalgo-promise/src/promise.js");n.d(r,"a",function(){return t.a})},"./node_modules/zalgo-promise/src/promise.js":function(e,r,n){"use strict";function t(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}n.d(r,"a",function(){return a});var o=n("./node_modules/zalgo-promise/src/utils.js"),i=n("./node_modules/zalgo-promise/src/exceptions.js"),s=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),a=function(){function e(r){var n=this;if(t(this,e),this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],r){var o=void 0,i=void 0,s=!1,a=!1,c=!1;try{r(function(e){c?n.resolve(e):(s=!0,o=e)},function(e){c?n.reject(e):(a=!0,i=e)})}catch(e){return void this.reject(e)}c=!0,s?this.resolve(o):a&&this.reject(i)}}return s(e,[{key:"resolve",value:function(e){if(this.resolved||this.rejected)return this;if(Object(o.a)(e))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=e,this.dispatch(),this}},{key:"reject",value:function(e){var r=this;if(this.resolved||this.rejected)return this;if(Object(o.a)(e))throw new Error("Can not reject promise with another promise");if(!e){var n=e&&"function"==typeof e.toString?e.toString():Object.prototype.toString.call(e);e=new Error("Expected reject to be called with Error, got "+n)}return this.rejected=!0,this.error=e,this.errorHandled||setTimeout(function(){r.errorHandled||Object(i.a)(e)},1),this.dispatch(),this}},{key:"asyncReject",value:function(e){this.errorHandled=!0,this.reject(e)}},{key:"dispatch",value:function(){var r=this,n=this.dispatching,t=this.resolved,i=this.rejected,s=this.handlers;if(!n&&(t||i)){this.dispatching=!0;for(var a=0;a<s.length;a++){(function(n){var a=s[n],c=a.onSuccess,u=a.onError,d=a.promise,f=void 0;if(t)try{f=c?c(r.value):r.value}catch(e){return d.reject(e),"continue"}else if(i){if(!u)return d.reject(r.error),"continue";try{f=u(r.error)}catch(e){return d.reject(e),"continue"}}f instanceof e&&(f.resolved||f.rejected)?(f.resolved?d.resolve(f.value):d.reject(f.error),f.errorHandled=!0):Object(o.a)(f)?f instanceof e&&(f.resolved||f.rejected)?f.resolved?d.resolve(f.value):d.reject(f.error):f.then(function(e){d.resolve(e)},function(e){d.reject(e)}):d.resolve(f)})(a)}s.length=0,this.dispatching=!1}}},{key:"then",value:function(r,n){if(r&&"function"!=typeof r&&!r.call)throw new Error("Promise.then expected a function for success handler");if(n&&"function"!=typeof n&&!n.call)throw new Error("Promise.then expected a function for error handler");var t=new e;return this.handlers.push({promise:t,onSuccess:r,onError:n}),this.errorHandled=!0,this.dispatch(),t}},{key:"catch",value:function(e){return this.then(void 0,e)}},{key:"finally",value:function(r){return this.then(function(n){return e.try(r).then(function(){return n})},function(n){return e.try(r).then(function(){throw n})})}},{key:"timeout",value:function(e,r){var n=this;if(this.resolved||this.rejected)return this;var t=setTimeout(function(){n.resolved||n.rejected||n.reject(r||new Error("Promise timed out after "+e+"ms"))},e);return this.then(function(e){return clearTimeout(t),e})}},{key:"toPromise",value:function(){if(!window.Promise)throw new Error("Could not find window.Promise");return window.Promise.resolve(this)}}],[{key:"resolve",value:function(r){return r instanceof e?r:Object(o.a)(r)?new e(function(e,n){return r.then(e,n)}):(new e).resolve(r)}},{key:"reject",value:function(r){return(new e).reject(r)}},{key:"all",value:function(r){var n=new e,t=r.length,o=[];if(!t)return n.resolve(o),n;for(var i=0;i<r.length;i++)!function(i){e.resolve(r[i]).then(function(e){o[i]=e,0===(t-=1)&&n.resolve(o)},function(e){n.reject(e)})}(i);return n}},{key:"map",value:function(r,n){var t=new e,o=r.length,i=[];if(!o)return t.resolve(i),t;for(var s=0;s<r.length;s++)!function(s){e.try(function(){return n(r[s])}).then(function(e){i[s]=e,0===(o-=1)&&t.resolve(i)},function(e){t.reject(e)})}(s);return t}},{key:"onPossiblyUnhandledException",value:function(e){return Object(i.b)(e)}},{key:"try",value:function(r,n,t){var o=void 0;try{o=r.apply(n,t||[])}catch(r){return e.reject(r)}return e.resolve(o)}},{key:"delay",value:function(r){return new e(function(e){setTimeout(e,r)})}},{key:"hash",value:function(r){var n={},t=[];for(var o in r)!function(o){r.hasOwnProperty(o)&&t.push(e.resolve(r[o]).then(function(e){n[o]=e}))}(o);return e.all(t).then(function(){return n})}},{key:"isPromise",value:function(r){return!!(r&&r instanceof e)||Object(o.a)(r)}}]),e}()},"./node_modules/zalgo-promise/src/utils.js":function(e,r,n){"use strict";function t(e){try{if(!e)return!1;if(window.Promise&&e instanceof window.Promise)return!0;if(window.Window&&e instanceof window.Window)return!1;if(window.constructor&&e instanceof window.constructor)return!1;if(o){var r=o.call(e);if("[object Window]"===r||"[object global]"===r||"[object DOMWindow]"===r)return!1}if("function"==typeof e.then)return!0}catch(e){return!1}return!1}r.a=t;var o={}.toString},"./src/child/index.js":function(e,r,n){"use strict";var t=n("./src/child/server.js");n.d(r,"a",function(){return t.a});n("./src/child/serialize.js")},"./src/child/serialize.js":function(e,r,n){"use strict";function t(e){var r={};return Array.from(e.keys()).forEach(function(n){r[n]=e.get(n)}),r}function o(e){return{ok:e.ok,redirected:e.redirected,status:e.status,statusText:e.statusText,type:e.type,url:e.url,bodyUsed:e.bodyUsed,headers:t(e.headers),text:e.text.bind(e),json:e.json.bind(e),clone:function(){return o(e.clone())}}}r.a=o},"./src/child/server.js":function(e,r,n){"use strict";function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.allow;if(!(void 0===r?[]:r))throw new Error("Request not allowed");return{cancel:Object(o.a)(i.a,{},function(e){var r=e.data,n=r.url,t=r.options;return window.fetch(n,t).then(function(e){return Object(s.a)(e)})}).cancel}}r.a=t;var o=n("./node_modules/post-robot/src/index.js"),i=n("./src/constants.js"),s=n("./src/child/serialize.js")},"./src/constants.js":function(e,r,n){"use strict";n.d(r,"a",function(){return t});var t="fetch-robot-proxy"},"./src/index.js":function(e,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var t=n("./src/parent/index.js");n.d(r,"connect",function(){return t.a}),n.d(r,"destroyAll",function(){return t.b});var o=n("./src/child/index.js");n.d(r,"serve",function(){return o.a})},"./src/parent/deserialize.js":function(e,r,n){"use strict";function t(e){return e.text().then(function(e){return new window.Response(e)})}r.a=t;n("./node_modules/zalgo-promise/src/index.js")},"./src/parent/fetch.js":function(e,r,n){"use strict";function t(e,r,n){return Object(o.b)(e,i.a,{url:r,options:n}).then(function(e){var r=e.data;return Object(s.a)(r)})}r.a=t;var o=(n("./node_modules/zalgo-promise/src/index.js"),n("./node_modules/post-robot/src/index.js")),i=n("./src/constants.js"),s=n("./src/parent/deserialize.js")},"./src/parent/frame.js":function(e,r,n){"use strict";function t(e){var r=Object(i.d)(e);if(!s[r]){var n=document.createElement("iframe");n.style.display="none",n.setAttribute("src",e);var t=document.body||document.head;if(!t)throw new Error("Could not find suitable container for proxy iframe");t.appendChild(n),s[r]=n}return s[r]}function o(){for(var e=Object.keys(s),r=Array.isArray(e),n=0,e=r?e:e[Symbol.iterator]();;){var t;if(r){if(n>=e.length)break;t=e[n++]}else{if(n=e.next(),n.done)break;t=n.value}var o=t,i=s[o];i.parentNode.removeChild(i),delete s[o]}}r.b=t,r.a=o;var i=n("./node_modules/cross-domain-utils/src/index.js"),s={}},"./src/parent/index.js":function(e,r,n){"use strict";var t=n("./src/parent/proxy.js");n.d(r,"a",function(){return t.a});var o=(n("./src/parent/fetch.js"),n("./src/parent/deserialize.js"),n("./src/parent/frame.js"));n.d(r,"b",function(){return o.a})},"./src/parent/proxy.js":function(e,r,n){"use strict";function t(e){var r=e.url,n=Object(i.b)(r).contentWindow;return{fetch:function(e,r){return Object(o.a)(n,e,r)}}}r.a=t;var o=n("./src/parent/fetch.js"),i=n("./src/parent/frame.js")}})});
//# sourceMappingURL=fetch-robot.min.js.map
//# sourceMappingURL=fetch-robot.min.js.map